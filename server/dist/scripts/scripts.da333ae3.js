"use strict";angular.module("clientApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl",controllerAs:"signup"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/game",{templateUrl:"views/game.html",controller:"GameCtrl",controllerAs:"game"}).otherwise({redirectTo:"/"})}]),angular.module("clientApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("SignupCtrl",["$http","$location",function(a,b){var c,d;d=this,c=d.user={},d.submit=function(){if(!c.email||!c.password1||!c.password2)return d.error="Please fill out all form fields.",!1;if(c.password1!==c.password2)return d.error="Your passwords must match.",!1;c.password=c.password1,console.log(c);var e=a.post("/signup",c);e.success(function(a){console.log(a),d.error=!1,d.success=a.message,b.path("/profile")}),e.error(function(a){console.log(a),Array.isArray(a.message)&&(a.message=a.message.join()),d.error=a.message})}}]),angular.module("clientApp").controller("ProfileCtrl",["$http","$location",function(a,b){var c=this,d=a.get("/profile");d.success(function(a){console.log(a),c.user=a.user}),d.error(function(){b.path("/login")})}]),angular.module("clientApp").controller("LoginCtrl",["$http","$location",function(a,b){var c,d;d=this,c=d.user={},d.submit=function(){if(!c.email||!c.password)return d.error="Please fill out all form fields.",!1;var e=a.post("/login",c);e.success(function(a){console.log(a),d.error=!1,d.success=a.message,b.path("/profile")}),e.error(function(a){console.log(a),Array.isArray(a.message)&&(a.message=a.message.join()),d.error=a.message})}}]),angular.module("clientApp").controller("GameCtrl",["$scope","$interval","$cookieStore",function(a,b,c){var d=this;d.data={},d.data.points=0,d.data.pointMultiplier=.25,d.data.pointConstant=1,d.pointRate=function(){return(d.data.pointMultiplier*d.data.pointConstant).toFixed(2)};var e=1e3,f=b(function(){console.log(d.data.points),d.data.points+=parseFloat(d.pointRate())},e),g=6e4,h=b(function(){console.log("Saving game: "+d.data.points),c.put("version",1),c.put("data",d.data)},g),i=function(){1===c.get("version")&&(d.data=c.get("data"))};i(),a.$on("$destroy",function(){angular.isDefined(f)&&(b.cancel(f),f=void 0),angular.isDefined(h)&&(b.cancel(h),h=void 0)})}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/game.html","<p>PPS: {{game.pointRate()}}</p> <p>Points: {{game.data.points | number:0}}</p>"),a.put("views/login.html",'<h1><span class="fa fa-sign-in"></span> Login</h1> <!-- LOGIN FORM --> <form class="form-horizontal"> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="email">Email</label> <div class="col-md-5"> <input id="email" name="email" ng-model="login.user.email" type="text" placeholder="Email Address" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password">Password</label> <div class="col-md-5"> <input id="password" name="password" ng-model="login.user.password" type="password" placeholder="Password" class="form-control input-md"> </div> </div> <!-- show any messages that come back with authentication --> <div class="alert alert-danger" ng-show="login.error" class="ng-hide">{{login.error}}</div> <!-- Button --> <div class="form-group"> <label class="col-md-4 control-label" for="login"></label> <div class="col-md-5"> <button ng-click="login.submit()" id="login" name="login" class="btn btn-success btn-block">Login!</button> </div> </div> </form> <hr> <div> <div class="col-md-4"></div> <div class="col-md-5"> <p class="text-center">Need an account? <a href="#/signup"><button type="button" class="btn btn-default btn-xs">Signup</button></a></p> </div> </div>'),a.put("views/main.html",'<div class="jumbotron text-center"> <h1><span class="fa fa-lock"></span> Monster Box</h1> <p>Login or Register with:</p> <a href="#/signup" class="btn btn-default"><span class="fa fa-user"></span> Local Signup</a> <a href="#/login" class="btn btn-default"><span class="fa fa-user"></span> Local Login</a> <a href="/auth/facebook" class="btn btn-primary"><span class="fa fa-facebook"></span> Facebook</a> <a href="/auth/twitter" class="btn btn-info"><span class="fa fa-twitter"></span> Twitter</a> <a href="/auth/google" class="btn btn-danger"><span class="fa fa-google-plus"></span> Google+</a> </div>'),a.put("views/profile.html",'<div class="page-header text-center"> <h1><span class="fa fa-anchor"></span> Profile Page</h1> <a href="/logout" class="btn btn-default btn-sm">Logout</a> </div> <div class="row"> <!-- LOCAL INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3><span class="fa fa-user"></span> Local</h3> <div ng-if="profile.user.local.email"> <p> <strong>id</strong>: {{profile.user._id}}<br> <strong>email</strong>: {{profile.user.local.email}}<br> <strong>password</strong>: {{profile.user.local.password}} </p> <a href="/unlink/local" class="btn btn-default">Unlink</a> </div> <div ng-if="!profile.user.local.email"> <a href="#/signup" class="btn btn-default">Connect Local</a> </div> </div> </div> <!-- FACEBOOK INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3 class="text-primary"><span class="fa fa-facebook"></span> Facebook</h3> <!-- check if the user has this token (is the user authenticated with this social account) --> <div ng-if="profile.user.facebook.token"> <p> <strong>id</strong>: {{profile.user.facebook.id}}<br> <strong>token</strong>: {{profile.user.facebook.token}}<br> <strong>email</strong>: {{profile.user.facebook.email}}<br> <strong>name</strong>: {{profile.user.facebook.name}}<br> </p> <a href="/unlink/facebook" class="btn btn-primary">Unlink</a> </div> <div ng-if="!profile.user.facebook.token"> <a href="/connect/facebook" class="btn btn-primary">Connect Facebook</a> </div> </div> </div> </div> <div class="row"> <!-- TWITTER INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3 class="text-info"><span class="fa fa-twitter"></span> Twitter</h3> <div ng-if="profile.user.twitter.token"> <p> <strong>id</strong>: {{profile.user.twitter.id}}<br> <strong>token</strong>: {{profile.user.twitter.token}}<br> <strong>display name</strong>: {{profile.user.twitter.displayName}}<br> <strong>username</strong>: {{profile.user.twitter.username}} </p> <a href="/unlink/twitter" class="btn btn-info">Unlink</a> </div> <div ng-if="!profile.user.twitter.token"> <a href="/connect/twitter" class="btn btn-info">Connect Twitter</a> </div> </div> </div> <!-- GOOGLE INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3 class="text-danger"><span class="fa fa-google-plus"></span> Google+</h3> <div ng-if="profile.user.google.token"> <p> <strong>id</strong>: {{profile.user.google.id}}<br> <strong>token</strong>: {{profile.user.google.token}}<br> <strong>email</strong>: {{profile.user.google.email}}<br> <strong>name</strong>: {{profile.user.google.name}} </p> <a href="/unlink/google" class="btn btn-danger">Unlink</a> </div> <div ng-if="!profile.user.google.token"> <a href="/connect/google" class="btn btn-danger">Connect Google</a> </div> </div> </div> </div>'),a.put("views/signup.html",'<div class="col-md-12"> <h3 class="signup-header">Signup as a New User</h3> <hr> <br> </div> <div class="signup-form"> <form class="form-horizontal"> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="email">Email</label> <div class="col-md-5"> <input id="email" name="email" ng-model="signup.user.email" type="text" placeholder="Email" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password1">Password</label> <div class="col-md-5"> <input id="password1" name="password1" ng-model="signup.user.password1" type="password" placeholder="" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password2">Retype Password</label> <div class="col-md-5"> <input id="password2" name="password2" ng-model="signup.user.password2" type="password" placeholder="" class="form-control input-md"> </div> </div> <!-- Error messages --> <div class="alert alert-danger" ng-show="signup.error" class="ng-hide">{{signup.error}}</div> <!-- Success messages --> <div class="alert alert-success" ng-show="signup.success" class="ng-hide">{{signup.success}}</div> <!-- Button --> <div class="form-group"> <label class="col-md-4 control-label" for="signup"></label> <div class="col-md-5"> <button ng-click="signup.submit()" id="signup" name="signup" class="btn btn-success btn-block">Signup!</button> </div> </div> </form> </div> <hr> <div> <div class="col-md-4"></div> <div class="col-md-5"> <p class="text-center">Already have an account? <a href="#/login"><button type="button" class="btn btn-default btn-xs">Login</button></a></p> </div> </div>')}]);