"use strict";angular.module("clientApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl",controllerAs:"signup"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/game",{templateUrl:"views/game.html",controller:"GameCtrl",controllerAs:"game"}).otherwise({redirectTo:"/"})}]),angular.module("clientApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("SignupCtrl",["$http","$location",function(a,b){var c,d;d=this,c=d.user={},d.submit=function(){if(!c.email||!c.password1||!c.password2)return d.error="Please fill out all form fields.",!1;if(c.password1!==c.password2)return d.error="Your passwords must match.",!1;c.password=c.password1,console.log(c);var e=a.post("/signup",c);e.success(function(a){console.log(a),d.error=!1,d.success=a.message,b.path("/profile")}),e.error(function(a){console.log(a),Array.isArray(a.message)&&(a.message=a.message.join()),d.error=a.message})}}]),angular.module("clientApp").controller("ProfileCtrl",["$http","$location",function(a,b){var c=this,d=a.get("/profile");d.success(function(a){console.log(a),c.user=a.user}),d.error(function(){b.path("/login")})}]),angular.module("clientApp").controller("LoginCtrl",["$http","$location",function(a,b){var c,d;d=this,c=d.user={},d.submit=function(){if(!c.email||!c.password)return d.error="Please fill out all form fields.",!1;var e=a.post("/login",c);e.success(function(a){console.log(a),d.error=!1,d.success=a.message,b.path("/profile")}),e.error(function(a){console.log(a),Array.isArray(a.message)&&(a.message=a.message.join()),d.error=a.message})}}]),angular.module("clientApp").controller("GameCtrl",["$scope","$http","$interval","$cookieStore",function(a,b,c,d){var e=3,f=this;f.data={},f.newGame=!0,f.pointRate=function(a){return(f.data[a].constant*f.data[a].multiplier).toFixed(2)},f.pointTotal=function(){var a=0;for(var b in f.data)f.data[b].hasOwnProperty("total")&&(a+=f.data[b].total);return a},f.ventureForth=function(){var a=b.get("/monster/getRandom/");a.success(function(a){f.data.hasOwnProperty(a.type)||(f.data[a.type]={total:0,constant:0,multiplier:0}),f.data[a.type].constant+=a.basePower,f.data[a.type].multiplier+=a.powerMultiplier,f.data.party.push(a)})},f.start=function(a){f.newGame=!1;var c=b.get("/monster/getStarter/"+a);c.success(function(b){f.data[a]={},f.data[a].total=0,f.data[a].constant=b.basePower,f.data[a].multiplier=b.powerMultiplier,f.data.party=[b]})};var g=1e3,h=c(function(){for(var a in f.data)f.data[a].hasOwnProperty("total")&&(f.data[a].total+=parseFloat(f.pointRate(a)));f.pointTotal()>e&&(f.data.canExplore=!0)},g),i=6e4,j=c(function(){f.newGame===!1&&(console.log("Saving game..."),d.put("version",1),d.put("data",f.data))},i),k=function(){1===d.get("version")&&(f.data=d.get("data"),f.newGame=!1)};k(),angular.element(document).ready(function(){angular.element("[data-toggle=offcanvas]").click(function(){"rgb(255, 255, 255)"===angular.element(".sidebar-offcanvas").css("background-color")?angular.element(".list-group-item").attr("tabindex","-1"):angular.element(".list-group-item").attr("tabindex",""),angular.element(".row-offcanvas").toggleClass("active")})}),a.$on("$destroy",function(){angular.isDefined(h)&&(c.cancel(h),h=void 0),angular.isDefined(j)&&(c.cancel(j),j=void 0)})}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is a game about monsters. And maybe possibly a box.</p>"),a.put("views/game.html",'<div class="panel panel-default"> <div class="panel-body"> <button ng-click="game.start(\'fire\')" ng-show="game.newGame" class="btn btn-default">Fire</button> <button ng-click="game.start(\'water\')" ng-show="game.newGame" class="btn btn-default">Water</button> <button ng-click="game.start(\'grass\')" ng-show="game.newGame" class="btn btn-default">Grass</button> <button ng-click="game.start(\'electric\')" ng-show="game.newGame" class="btn btn-default">Do Not Click</button> <button ng-show="game.data.fire" class="btn btn-default mb-fire disabled">Fire: {{game.data.fire.total | number:0}}</button> <button ng-show="game.data.water" class="btn btn-default mb-water disabled">Water: {{game.data.water.total | number:0}}</button> <button ng-show="game.data.grass" class="btn btn-default mb-grass disabled">Grass: {{game.data.grass.total | number:0}}</button> <button ng-show="game.data.electric" class="btn btn-default mb-electric disabled">Electric: {{game.data.electric.total | number:0}}</button> <button ng-show="game.data.normal" class="btn btn-default mb-normal disabled">Normal: {{game.data.normal.total | number:0}}</button> </div> </div> <div ng-show="game.data.canExplore" class="panel panel-default"> <div class="panel-body"> <button ng-click="game.ventureForth()" class="btn btn-default">Venture Forth</button> </div> </div> <div class="container-fluid"> <div class="row row-offcanvas row-offcanvas-left"> <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation"> <div ng-repeat="monster in game.data.party"> <img class="party-image" ng-src="{{monster.image}}"><br> {{monster.name}} </div> </div> <div class="col-xs-12 col-sm-9 content"> <p class="pull-left"> <button ng-show="game.data.party" type="button" class="btn btn-primary" id="party-button" data-toggle="offcanvas">Party</button> </p> </div> </div></div>'),a.put("views/login.html",'<h1><span class="fa fa-sign-in"></span> Login</h1> <!-- LOGIN FORM --> <form class="form-horizontal"> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="email">Email</label> <div class="col-md-5"> <input id="email" name="email" ng-model="login.user.email" type="text" placeholder="Email Address" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password">Password</label> <div class="col-md-5"> <input id="password" name="password" ng-model="login.user.password" type="password" placeholder="Password" class="form-control input-md"> </div> </div> <!-- show any messages that come back with authentication --> <div class="alert alert-danger" ng-show="login.error" class="ng-hide">{{login.error}}</div> <!-- Button --> <div class="form-group"> <label class="col-md-4 control-label" for="login"></label> <div class="col-md-5"> <button ng-click="login.submit()" id="login" name="login" class="btn btn-success btn-block">Login!</button> </div> </div> </form> <hr> <div> <div class="col-md-4"></div> <div class="col-md-5"> <p class="text-center">Need an account? <a href="#/signup"><button type="button" class="btn btn-default btn-xs">Signup</button></a></p> </div> </div>'),a.put("views/main.html",'<div class="jumbotron text-center"> <h1>Monster Box</h1> <a href="#/game" class="btn btn-default" type="submit">Start Game!</a> </div> <div class="panel panel-default"> <div class="panel-heading">Login or Register</div> <div class="panel-body"> <a href="#/login" class="btn btn-default"><span class="fa fa-user"></span> Local Login</a> <a href="/auth/facebook" class="btn btn-primary"><span class="fa fa-facebook"></span> Facebook</a> <a href="/auth/twitter" class="btn btn-info"><span class="fa fa-twitter"></span> Twitter</a> <a href="/auth/google" class="btn btn-danger"><span class="fa fa-google-plus"></span> Google+</a> <a href="#/signup" class="btn btn-default"><span class="fa fa-user"></span> Local Signup</a> </div> </div>'),a.put("views/profile.html",'<div class="page-header text-center"> <h1><span class="fa fa-anchor"></span> Profile Page</h1> <a href="/logout" class="btn btn-default btn-sm">Logout</a> </div> <div class="row"> <!-- LOCAL INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3><span class="fa fa-user"></span> Local</h3> <div ng-if="profile.user.local.email"> <p> <strong>id</strong>: {{profile.user._id}}<br> <strong>email</strong>: {{profile.user.local.email}}<br> <strong>password</strong>: {{profile.user.local.password}} </p> <a href="/unlink/local" class="btn btn-default">Unlink</a> </div> <div ng-if="!profile.user.local.email"> <a href="#/signup" class="btn btn-default">Connect Local</a> </div> </div> </div> <!-- FACEBOOK INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3 class="text-primary"><span class="fa fa-facebook"></span> Facebook</h3> <!-- check if the user has this token (is the user authenticated with this social account) --> <div ng-if="profile.user.facebook.token"> <p> <strong>id</strong>: {{profile.user.facebook.id}}<br> <strong>token</strong>: {{profile.user.facebook.token}}<br> <strong>email</strong>: {{profile.user.facebook.email}}<br> <strong>name</strong>: {{profile.user.facebook.name}}<br> </p> <a href="/unlink/facebook" class="btn btn-primary">Unlink</a> </div> <div ng-if="!profile.user.facebook.token"> <a href="/connect/facebook" class="btn btn-primary">Connect Facebook</a> </div> </div> </div> </div> <div class="row"> <!-- TWITTER INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3 class="text-info"><span class="fa fa-twitter"></span> Twitter</h3> <div ng-if="profile.user.twitter.token"> <p> <strong>id</strong>: {{profile.user.twitter.id}}<br> <strong>token</strong>: {{profile.user.twitter.token}}<br> <strong>display name</strong>: {{profile.user.twitter.displayName}}<br> <strong>username</strong>: {{profile.user.twitter.username}} </p> <a href="/unlink/twitter" class="btn btn-info">Unlink</a> </div> <div ng-if="!profile.user.twitter.token"> <a href="/connect/twitter" class="btn btn-info">Connect Twitter</a> </div> </div> </div> <!-- GOOGLE INFORMATION --> <div class="col-sm-6"> <div class="well"> <h3 class="text-danger"><span class="fa fa-google-plus"></span> Google+</h3> <div ng-if="profile.user.google.token"> <p> <strong>id</strong>: {{profile.user.google.id}}<br> <strong>token</strong>: {{profile.user.google.token}}<br> <strong>email</strong>: {{profile.user.google.email}}<br> <strong>name</strong>: {{profile.user.google.name}} </p> <a href="/unlink/google" class="btn btn-danger">Unlink</a> </div> <div ng-if="!profile.user.google.token"> <a href="/connect/google" class="btn btn-danger">Connect Google</a> </div> </div> </div> </div>'),a.put("views/signup.html",'<div class="col-md-12"> <h3 class="signup-header">Signup as a New User</h3> <hr> <br> </div> <div class="signup-form"> <form class="form-horizontal"> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="email">Email</label> <div class="col-md-5"> <input id="email" name="email" ng-model="signup.user.email" type="text" placeholder="Email" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password1">Password</label> <div class="col-md-5"> <input id="password1" name="password1" ng-model="signup.user.password1" type="password" placeholder="" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password2">Retype Password</label> <div class="col-md-5"> <input id="password2" name="password2" ng-model="signup.user.password2" type="password" placeholder="" class="form-control input-md"> </div> </div> <!-- Error messages --> <div class="alert alert-danger" ng-show="signup.error" class="ng-hide">{{signup.error}}</div> <!-- Success messages --> <div class="alert alert-success" ng-show="signup.success" class="ng-hide">{{signup.success}}</div> <!-- Button --> <div class="form-group"> <label class="col-md-4 control-label" for="signup"></label> <div class="col-md-5"> <button ng-click="signup.submit()" id="signup" name="signup" class="btn btn-success btn-block">Signup!</button> </div> </div> </form> </div> <hr> <div> <div class="col-md-4"></div> <div class="col-md-5"> <p class="text-center">Already have an account? <a href="#/login"><button type="button" class="btn btn-default btn-xs">Login</button></a></p> </div> </div>')}]);